# 食道超声模拟软件 - 开发环境安装指南

## 当前环境状态分析

✅ **已安装工具**：
- Git 2.51.2.windows.1
- Visual Studio Code

❌ **需要安装的工具**：
- Node.js
- npm 包管理器
- 项目依赖

## 第一步：安装 Node.js

### 1.1 下载 Node.js
1. 访问 [Node.js 官网](https://nodejs.org/)
2. 下载 **LTS 版本** (推荐 18.x 或更高版本)
3. 运行安装程序，使用默认设置

### 1.2 验证安装
安装完成后，在终端中运行以下命令验证：
```bash
node --version
npm --version
```

预期输出类似：
```
v18.17.0
9.6.7
```

## 第二步：配置 npm 镜像（可选，推荐）

为了加快依赖下载速度，可以配置淘宝镜像：

```bash
# 设置淘宝镜像
npm config set registry https://registry.npmmirror.com

# 验证配置
npm config get registry
```

## 第三步：安装项目依赖

在项目根目录执行：

```bash
# 安装项目依赖
npm install
```

这个命令会安装 package.json 中定义的所有依赖：
- **运行时依赖**：react, react-dom, three
- **开发依赖**：typescript, vite, jest, @types/...

## 第四步：验证安装

### 4.1 测试开发服务器
```bash
npm run dev
```

如果成功，您应该看到：
```
  VITE v5.0.0  ready in 1234 ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
```

### 4.2 测试构建
```bash
npm run build
```

### 4.3 运行测试
```bash
npm test
```

## 第五步：VS Code 扩展推荐

在 VS Code 扩展商店安装以下扩展：

### 必需扩展：
- **TypeScript and JavaScript Language Features** - TypeScript 支持
- **ES7+ React/Redux/React-Native snippets** - React 开发助手
- **Auto Rename Tag** - HTML/JSX 标签自动重命名
- **Bracket Pair Colorizer** - 括号配对颜色

### 推荐扩展：
- **ESLint** - 代码质量检查
- **Prettier - Code formatter** - 代码格式化
- **GitLens** - Git 增强功能
- **Three.js Snippets** - Three.js 代码片段
- **Material Icon Theme** - 文件图标主题

## 第六步：配置 VS Code 设置

在 VS Code 设置中（Ctrl+,）添加：

```json
{
  "typescript.preferences.importModuleSpecifier": "relative",
  "editor.formatOnSave": true,
  "emmet.includeLanguages": {
    "typescript": "html",
    "typescriptreact": "html"
  }
}
```

## 第七步：开发工作流

### 日常开发流程：
```bash
# 1. 启动开发服务器
npm run dev

# 2. 在浏览器中访问 http://localhost:5173

# 3. 修改代码后会自动热重载

# 4. 运行测试
npm test

# 5. 构建生产版本
npm run build
```

## 故障排除

### 常见问题：

1. **依赖安装失败**
   ```bash
   # 清除缓存重新安装
   npm cache clean --force
   rm -rf node_modules package-lock.json
   npm install
   ```

2. **端口被占用**
   ```bash
   # 使用不同端口
   npm run dev -- --port 3000
   ```

3. **TypeScript 类型错误**
   ```bash
   # 重新安装类型定义
   npm install @types/react @types/react-dom @types/three
   ```

## 技术栈概览

- **前端框架**: React 18 + TypeScript
- **3D渲染**: Three.js
- **构建工具**: Vite
- **测试框架**: Jest
- **包管理器**: npm

## 下一步

安装完成后，您可以：
1. 运行 `npm run dev` 启动开发服务器
2. 运行 `npm test` 验证测试环境
3. 开始开发食道超声模拟功能

如果您在安装过程中遇到任何问题，请查看项目文档或联系开发团队。
