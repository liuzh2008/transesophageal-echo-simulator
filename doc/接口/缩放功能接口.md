# **缩放功能接口文档**

## **接口路径**
`src/core/zoom/ZoomManager.ts`

## **功能说明**
缩放管理器负责管理3D场景的缩放状态和业务逻辑，提供缩放值到相机距离的转换功能。

## **请求参数**

### **ZoomState 接口**
```typescript
interface ZoomState {
  value: number;    // 当前缩放值，范围0-100
  min: number;      // 最小缩放值，默认0
  max: number;      // 最大缩放值，默认100
  step: number;     // 缩放步长，默认1
}
```

### **ZoomManager 接口**
```typescript
interface ZoomManager {
  getState(): ZoomState;                    // 获取当前缩放状态
  setZoom(value: number): void;             // 设置缩放值
  reset(): void;                            // 重置缩放状态
  isValidZoom(value: number): boolean;      // 验证缩放值是否有效
}
```

### **缩放转换函数**
```typescript
zoomValueToCameraDistance(zoomValue: number): number
cameraDistanceToZoomValue(distance: number): number
```

## **响应格式**

### **ZoomState 响应格式**
```typescript
{
  value: number,    // 当前缩放值
  min: number,      // 最小缩放值
  max: number,      // 最大缩放值
  step: number      // 缩放步长
}
```

### **缩放转换响应格式**
- `zoomValueToCameraDistance`: 返回number类型，表示相机距离
- `cameraDistanceToZoomValue`: 返回number类型，表示缩放值

## **逻辑**

### **缩放值转换逻辑**
- **缩放值范围**: 0-100
- **相机距离范围**: 2-50
- **转换公式**: 
  - 缩放值0 → 相机距离50（最远）
  - 缩放值50 → 相机距离26（中等）
  - 缩放值100 → 相机距离2（最近）

### **缩放管理器逻辑**
- 提供状态管理功能，包括获取状态、设置缩放值、重置状态
- 验证缩放值的有效性，确保在有效范围内
- 支持自定义初始状态配置

## **响应示例**

### **创建缩放管理器实例**
```typescript
const zoomManager = createZoomManager({ value: 50, min: 0, max: 100 });
```

### **获取缩放状态**
```typescript
const state = zoomManager.getState();
// 返回: { value: 50, min: 0, max: 100, step: 1 }
```

### **缩放值转换示例**
```typescript
const distance = zoomValueToCameraDistance(50);  // 返回: 26
const zoomValue = cameraDistanceToZoomValue(26); // 返回: 50
```

### **设置缩放值**
```typescript
zoomManager.setZoom(75);  // 设置缩放值为75
```

### **验证缩放值**
```typescript
const isValid = zoomManager.isValidZoom(120);  // 返回: false
```

## **相关文件**
- `src/core/Scene3D.tsx` - 使用缩放功能的3D场景组件
- `src/ui/AppWithZoom.tsx` - 集成缩放功能的主应用组件
- `src/core/zoom/ZoomContext.tsx` - 缩放上下文组件
